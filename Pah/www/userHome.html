<ons-page id="userHome">
  <ons-toolbar id="toolbar" class="toolbar" modifier="transparent">
    <div class="left">
      <ons-toolbar-button onclick="fn.open()">
        <i class="menuButtonIcon ion-md-menu"></i>
      </ons-toolbar-button>
    </div>
    <div class="center labelToolbar" id="titleSplitterUser">
      INICIO
    </div>
  </ons-toolbar>

  <div id="homeOptionTotalMoney"></div>

  <div class="homeOptionExpenses"></div>

  <div class="homeOptionSaving"></div>

  <div class="homeOptionGoals"></div>

  <script>
    document.addEventListener(
      "init",
      function (event) {
        if (event.target.matches("#userHome")) {
          let userHomeView = document.getElementById("homeOptionTotalMoney");
          userHomeView.innerHTML = "";

          let totalMoney = localStorage.getItem("storageSwitchTotalMoney");
          if (totalMoney == "null" || totalMoney == null) {
            localStorage.setItem("storageSwitchTotalMoney", true);
          } else {
            if (totalMoney == true || totalMoney == "true") {
              userHomeView.innerHTML += `<label class="cardHomeTitle">DINERO TOTAL</label>
              <ons-card onclick="fn.load('money.html')">
                <div class="title totalMoneyTitle" id="totalMoneyMoney">
                  $ 5470
                </div>
              </ons-card>`;
            }
          }

          let expenses = localStorage.getItem("storageSwitchExpenses");
          if (expenses == "null" || expenses == null) {
            localStorage.setItem("storageSwitchExpenses", true);
          } else {
            if (expenses == true || expenses == "true") {
              userHomeView.innerHTML += `<label class="cardHomeTitle">GASTOS</label>
              <ons-card onclick="fn.load('expenses.html')" style="padding-top: 16px;">
                <div class="content">
                  <canvas id="oilChart" width="400" height="400"></canvas>
                </div>
              </ons-card>`;
            }
          }

          let savings = localStorage.getItem("storageSwitchSavings");
          if (savings == "null" || savings == null) {
            localStorage.setItem("storageSwitchSavings", true);
          } else {
            if (savings == true || savings == "true") {
              userHomeView.innerHTML += `<label class="cardHomeTitle">FONDO AHORRADO</label>
              <ons-card onclick="fn.load('savings.html')">
                <div class="title totalMoneyTitle" id="totalSavingsAmount">
                  $ 5470
                </div>
              </ons-card>`;
            }
          }

          let goals = localStorage.getItem("storageSwitchGoals");
          if (goals == "null" || goals == null) {
            localStorage.setItem("storageSwitchGoals", true);
          } else {
            if (goals == true || goals == "true") {
              userHomeView.innerHTML += `<label class="cardHomeTitle">METAS</label>
              <ons-card onclick="fn.load('goals.html')">
                <div class="content" id="homeGoalsContainer"> 

                </div>
              </ons-card>`;
            }
          }

          if (totalMoney == "false" && expenses == "false" && savings == "false" && goals == "false") {
            userHomeView.innerHTML = "";
            userHomeView.innerHTML += `<label class="cardHomeTitle">NADA POR AQU√ç...</label>`;
          }

          if (totalMoney == "true") {
            let amount = getTotalMoney();
            document.getElementById("totalMoneyMoney").innerHTML = "$ " + amount;
          }

          if (expenses == "true") {
            makeChart();
            //getTotalExpenses();
          }

          if (savings == "true") {
            let amount = getTotalSavings();
            document.getElementById("totalSavingsAmount").innerHTML = "$ " + amount;
          }

          if (goals == "true") {
            let goals = getTotalGoals();
            document.getElementById("homeGoalsContainer").innerHTML = goals;
          }

        }
      },
      false
    );
  </script>
</ons-page>
